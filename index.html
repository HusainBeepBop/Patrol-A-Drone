<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrol Pro: Interactive Design Brief</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        .nav-link {
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        .nav-link:hover, .nav-link.active {
            color: #0284c7; /* sky-600 */
            border-color: #0284c7; /* sky-600 */
        }
        .kpi-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .anatomy-part {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .anatomy-part:hover {
            background-color: #e0f2fe; /* sky-100 */
            transform: scale(1.05);
        }
        .anatomy-part.active {
            background-color: #bae6fd; /* sky-200 */
            border-color: #0284c7; /* sky-600 */
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 320px;
            width: 100%;
            max-width: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-200">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-slate-800">Patrol Pro</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#mission" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Mission</a>
                        <a href="#components" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Components</a>
                        <a href="#anatomy" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Anatomy</a>
                        <a href="#calculations" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Calculations</a>
                        <a href="#performance" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Performance</a>
                        <a href="#testing" class="nav-link text-slate-600 font-medium px-3 py-2 text-sm">Testing</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section id="mission" class="py-16 sm:py-24 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-slate-900">Engineering a Redundant & Reliable Inspection UAS</h1>
                <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600">The Patrol Pro is a specialized octocopter UAS optimized for safe, efficient, and detailed infrastructure inspections. This brief details the engineering trade-offs made to create a lighter, more reliable platform, achieving mission objectives without compromising on safety or data quality.</p>
                
                <div class="mt-12 flex flex-wrap justify-center gap-4 md:gap-6 max-w-5xl mx-auto">
                    <div class="kpi-card bg-slate-50 p-4 rounded-lg border border-slate-200 w-48 flex-grow">
                        <div class="text-3xl font-bold text-sky-600">> 25<span class="text-xl">min</span></div>
                        <div class="mt-1 text-sm font-medium text-slate-500">Flight Endurance</div>
                    </div>
                    <div class="kpi-card bg-slate-50 p-4 rounded-lg border border-slate-200 w-48 flex-grow">
                        <div class="text-3xl font-bold text-sky-600">10.55<span class="text-xl">kg</span></div>
                        <div class="mt-1 text-sm font-medium text-slate-500">All-Up Weight</div>
                    </div>
                    <div class="kpi-card bg-slate-50 p-4 rounded-lg border border-slate-200 w-48 flex-grow">
                        <div class="text-3xl font-bold text-sky-600">3.56:1</div>
                        <div class="mt-1 text-sm font-medium text-slate-500">Thrust-to-Weight</div>
                    </div>
                    <div class="kpi-card bg-slate-50 p-4 rounded-lg border border-slate-200 w-48 flex-grow">
                        <div class="text-3xl font-bold text-sky-600">1.47<span class="text-xl">kg</span></div>
                        <div class="mt-1 text-sm font-medium text-slate-500">Payload Weight</div>
                    </div>
                     <div class="kpi-card bg-slate-50 p-4 rounded-lg border border-slate-200 w-48 flex-grow">
                        <div class="text-3xl font-bold text-sky-600">Octocopter</div>
                        <div class="mt-1 text-sm font-medium text-slate-500">Motor Redundancy</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="components" class="py-16 sm:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-slate-900">Component Specifications</h2>
                    <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600">An at-a-glance overview of the core hardware, selected for an optimal balance of performance, weight, and reliability.</p>
                </div>
                <div class="mt-12 max-w-6xl mx-auto space-y-6">
                    <div class="grid grid-cols-6 gap-4 font-bold text-slate-800 border-b pb-2 text-sm">
                        <div class="col-span-2">Component</div>
                        <div class="col-span-3">Key Specifications</div>
                        <div class="col-span-1">Rationale</div>
                    </div>
                    <div class="grid grid-cols-6 gap-4 items-center bg-white p-4 rounded-lg border border-slate-200">
                        <div class="col-span-2 font-semibold">Airframe: Tarot X8-Pro</div>
                        <div class="col-span-3 text-sm text-slate-600">Material: Carbon Fiber | Config: Octocopter | Size: 1100mm Class | Weight: 2.8 kg</div>
                        <div class="col-span-1 text-sm text-slate-600">Motor redundancy for safety.</div>
                    </div>
                    <div class="grid grid-cols-6 gap-4 items-center bg-white p-4 rounded-lg border border-slate-200">
                        <div class="col-span-2 font-semibold">Propulsion: T-Motor P60 (x8)</div>
                        <div class="col-span-3 text-sm text-slate-600">Motor: 170KV | ESC: Alpha 60A LV | Propeller: 22x7.2" Carbon | Max Thrust/Motor: 4.7 kg</div>
                        <div class="col-span-1 text-sm text-slate-600">High-efficiency, reliable integrated system.</div>
                    </div>
                     <div class="grid grid-cols-6 gap-4 items-center bg-white p-4 rounded-lg border border-slate-200">
                        <div class="col-span-2 font-semibold">Power: Tattu 16Ah LiPo (x2)</div>
                        <div class="col-span-3 text-sm text-slate-600">Chemistry: LiPo | Config: 2x 6S in Parallel (6S2P) | Capacity: 32,000mAh Total | Weight: 3.8 kg</div>
                        <div class="col-span-1 text-sm text-slate-600">Best power-to-weight ratio; battery redundancy.</div>
                    </div>
                     <div class="grid grid-cols-6 gap-4 items-center bg-white p-4 rounded-lg border border-slate-200">
                        <div class="col-span-2 font-semibold">Avionics: Cube Orange+</div>
                        <div class="col-span-3 text-sm text-slate-600">FC: Triple-redundant IMU | GPS: Here 3+ (RTK Capable) | Firmware: ArduPilot</div>
                        <div class="col-span-1 text-sm text-slate-600">Industry-standard reliability and precision.</div>
                    </div>
                    <div class="grid grid-cols-6 gap-4 items-center bg-white p-4 rounded-lg border border-slate-200">
                        <div class="col-span-2 font-semibold">Payload System</div>
                        <div class="col-span-3 text-sm text-slate-600">Gimbal: Gremsy T3V3 | Visual: Sony A7R IV (61MP) | Thermal: FLIR Hadron 640R</div>
                        <div class="col-span-1 text-sm text-slate-600">Professional-grade data capture.</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="anatomy" class="py-16 sm:py-24 bg-slate-50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-slate-900">Interactive Anatomy</h2>
                    <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600">Explore the re-evaluated subsystems of the Patrol Pro. Click any component to see its details.</p>
                </div>

                <div class="mt-12 lg:grid lg:grid-cols-2 lg:gap-8 items-center">
                    <div class="lg:col-span-1">
                        <div id="details-panel" class="bg-white p-6 rounded-lg shadow-md border border-slate-200 min-h-[450px]">
                        </div>
                    </div>
                    <div class="mt-10 lg:mt-0 lg:col-span-1 flex justify-center items-center h-96">
                        <div class="relative w-96 h-96">
                            <div data-part="frame" class="anatomy-part absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-slate-300 rounded-lg flex items-center justify-center font-bold text-slate-700">Frame</div>
                            <div data-part="power" class="anatomy-part absolute top-[30%] left-1/2 -translate-x-1/2 w-24 h-12 bg-sky-200 rounded flex items-center justify-center font-semibold text-sky-800 text-sm">Power</div>
                            <div data-part="avionics" class="anatomy-part absolute top-[50%] left-1/2 -translate-x-1/2 w-32 h-12 bg-indigo-200 rounded flex items-center justify-center font-semibold text-indigo-800 text-sm">Avionics</div>
                            <div data-part="payload" class="anatomy-part absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full w-32 h-20 bg-amber-200 rounded-lg flex items-center justify-center font-semibold text-amber-800">Payload</div>
                            
                            <div data-part="propulsion" class="anatomy-part absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute top-1/2 left-0 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute top-1/2 right-0 translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute top-[15%] left-[15%] -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute top-[15%] right-[15%] translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute bottom-[15%] left-[15%] -translate-x-1/2 translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                            <div data-part="propulsion" class="anatomy-part absolute bottom-[15%] right-[15%] translate-x-1/2 translate-y-1/2 w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-xs font-semibold">Motor</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="calculations" class="py-16 sm:py-24 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-slate-900">Engineering Calculations</h2>
                    <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600">A transparent breakdown of the key calculations that define the drone's performance capabilities.</p>
                </div>
                <div class="mt-12 max-w-4xl mx-auto space-y-8">
                    <div class="bg-slate-50 p-6 rounded-lg border">
                        <h3 class="font-semibold text-lg">All-Up Weight (AUW) Calculation</h3>
                        <div class="mt-4 text-sm flow-root">
                            <ul class="divide-y divide-slate-200">
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Airframe</span><span class="font-medium">2.80 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Motors (8 x 168g)</span><span class="font-medium">1.34 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">ESCs (8 x 37g)</span><span class="font-medium">0.30 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Propellers (8 x 60g)</span><span class="font-medium">0.48 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Batteries (2 x 1900g)</span><span class="font-medium">3.80 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Avionics (FC + GPS)</span><span class="font-medium">0.12 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Payload (Gimbal + Cameras)</span><span class="font-medium">1.47 kg</span></li>
                                <li class="py-2 flex justify-between"><span class="text-slate-600">Wiring & Misc.</span><span class="font-medium">0.24 kg</span></li>
                                <li class="pt-4 flex justify-between text-base border-t-2 border-slate-300"><span class="font-bold text-slate-800">Total All-Up Weight</span><span class="font-bold text-sky-600">10.55 kg</span></li>
                            </ul>
                        </div>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-lg border">
                        <h3 class="font-semibold text-lg">Thrust-to-Weight Ratio (TWR)</h3>
                         <p class="text-sm text-slate-500 mt-1">This ratio is crucial for vehicle authority and motor-out redundancy.</p>
                        <div class="mt-4 text-sm space-y-2">
                             <p>1. <span class="font-semibold">Max Thrust per Motor:</span> 4.7 kg (from manufacturer data)</p>
                             <p>2. <span class="font-semibold">Total System Thrust:</span> 8 motors × 4.7 kg/motor = <span class="font-medium">37.6 kg</span></p>
                             <p>3. <span class="font-semibold">TWR Formula:</span> Total Thrust / AUW</p>
                             <p class="mt-4 text-lg font-bold">TWR = 37.6 kg / 10.55 kg = <span class="text-sky-600">3.56 : 1</span></p>
                        </div>
                    </div>
                     <div class="bg-slate-50 p-6 rounded-lg border">
                        <h3 class="font-semibold text-lg">Flight Endurance Calculation</h3>
                        <p class="text-sm text-slate-500 mt-1">Estimates hover time under ideal conditions, accounting for battery health.</p>
                        <div class="mt-4 text-sm space-y-2">
                             <p>1. <span class="font-semibold">Estimated Power to Hover:</span> 10.55 kg × 130 W/kg = <span class="font-medium">1372 W</span></p>
                             <p>2. <span class="font-semibold">Total Battery Energy:</span> 32Ah × 22.2V = <span class="font-medium">710 Wh</span></p>
                             <p>3. <span class="font-semibold">Usable Energy (80%):</span> 710 Wh × 0.8 = <span class="font-medium">568 Wh</span></p>
                             <p>4. <span class="font-semibold">Endurance Formula:</span> Usable Energy / Power to Hover</p>
                             <p class="mt-4 text-lg font-bold">Time = 568 Wh / 1372 W = 0.41 hours ≈ <span class="text-sky-600">25 minutes</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="performance" class="py-16 sm:py-24 bg-slate-50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-slate-900">Performance Dashboard</h2>
                    <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600">The new component selection results in a lighter, more agile drone with excellent performance metrics for its mission.</p>
                </div>
                <div class="mt-12 grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                    <div class="bg-white p-6 rounded-lg border border-slate-200">
                        <h3 class="font-semibold text-lg text-slate-800 text-center">AUW Contribution</h3>
                        <p class="text-sm text-slate-500 text-center mt-1">Total: 10.55 kg</p>
                        <div class="chart-container mt-4">
                            <canvas id="weightChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-8">
                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">Thrust-to-Weight Ratio</h3>
                            <div class="mt-4 space-y-2">
                                <div class="flex justify-between text-sm font-medium text-slate-600"><span>Calculated TWR</span><span>3.56:1</span></div>
                                <div class="w-full bg-slate-200 rounded-full h-4"><div class="bg-sky-500 h-4 rounded-full" style="width: 85%;"></div></div>
                                <div class="flex justify-between text-xs text-slate-400"><span>Redundancy Min (3:1)</span><span>Max (4.2:1)</span></div>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg border border-slate-200">
                             <h3 class="font-semibold text-lg text-slate-800">Flight Time Trade-off</h3>
                             <p class="text-sm text-slate-500 mt-1">Heavy payload is the primary factor limiting flight time.</p>
                            <div class="mt-4 flex items-center justify-around text-center">
                                <div>
                                    <div class="text-2xl font-bold text-amber-500">1.47 kg</div><div class="text-sm text-slate-500">Payload</div>
                                </div>
                                <div class="text-slate-300 text-2xl font-light">→</div>
                                <div>
                                    <div class="text-2xl font-bold text-sky-600">~25 min</div><div class="text-sm text-slate-500">Endurance</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="testing" class="py-16 sm:py-24 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-slate-900">Testing Plan</h2>
                    <p class="mt-2 max-w-2xl mx-auto text-lg text-slate-600">A rigorous, phased testing protocol ensures every subsystem is validated, with a key focus on failsafe and redundancy checks.</p>
                </div>
                <div class="mt-12 max-w-4xl mx-auto">
                    <ol class="relative border-l border-slate-200">
                        <li class="mb-10 ml-4">
                            <div class="absolute w-3 h-3 bg-sky-600 rounded-full mt-1.5 -left-1.5 border"></div>
                            <h3 class="text-lg font-semibold text-slate-900">Phase 1: Component & Subsystem Bench Tests</h3>
                            <p class="mt-1 text-sm text-slate-600">Verify thrust curves, battery capacity, and sensor calibration in a controlled lab environment.</p>
                        </li>
                        <li class="mb-10 ml-4">
                            <div class="absolute w-3 h-3 bg-sky-600 rounded-full mt-1.5 -left-1.5 border"></div>
                            <h3 class="text-lg font-semibold text-slate-900">Phase 2: Flight Control & Redundancy Tests</h3>
                            <p class="mt-1 text-sm text-slate-600">Conduct hover tests, tune PID gains, and perform simulated motor-out tests to validate octocopter redundancy and failsafe protocols.</p>
                        </li>
                        <li class="ml-4">
                            <div class="absolute w-3 h-3 bg-sky-600 rounded-full mt-1.5 -left-1.5 border"></div>
                            <h3 class="text-lg font-semibold text-slate-900">Phase 3: Full Mission & EMI Simulation</h3>
                            <p class="mt-1 text-sm text-slate-600">Integrate the full payload and fly a simulated inspection route to test data capture and EMI mitigation effectiveness.</p>
                        </li>
                    </ol>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-400">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-sm">
            <p>Patrol Pro: Interactive Design Brief</p>
            <p>Husain - Adidev - Falgun</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const anatomyData = {
        frame: {
            title: 'Airframe: Tarot X8-Pro Octocopter',
            imageUrl: 'https://i.postimg.cc/J7srznYn/frame.png',
            content: `The chosen airframe is a <strong>Tarot X8-Pro 1100mm class octocopter</strong>. This provides superior motor redundancy, a critical safety feature for operating near valuable infrastructure. Its carbon fiber construction offers an excellent strength-to-weight ratio, and the folding design ensures portability.`,
            spec: 'Material: 3K Carbon Fiber | Weight: ~2.8 kg | Config: Octocopter'
        },
        propulsion: {
            title: 'Propulsion: T-Motor P60 & Alpha ESC',
            imageUrl: 'https://i.postimg.cc/zGr87kzb/rotor.png',
            content: `An integrated propulsion system from T-Motor is selected for reliability. Eight <strong>P60 KV170 motors</strong> are paired with <strong>22-inch carbon fiber propellers</strong> and matched with <strong>Alpha 60A LV ESCs</strong>. This setup is highly efficient and provides significant thrust for the drone's weight class.`,
            spec: 'Motor: P60 KV170 | ESC: 60A LV | Prop: 22x7.2-inch Carbon Fiber'
        },
        power: {
            title: 'Power: Tattu 6S High-C LiPo',
            imageUrl: 'https://i.postimg.cc/tCP9FcjG/power.png',
            content: `To optimize the power-to-weight ratio, the system uses two parallel <strong>Tattu 6S 16,000mAh 25C LiPo batteries</strong>. This provides high discharge capability for peak power demands and introduces battery redundancy, a key safety enhancement.`,
            spec: 'Chemistry: LiPo | Capacity: 32,000mAh (Total) | Voltage: 22.2V (6S) | Weight: ~3.8kg (Total)'
        },
        payload: {
            title: 'Payload: Gremsy T3V3 & Dual Sensors',
            imageUrl: 'https://i.postimg.cc/qBWkhTWG/Payload.png',
            content: `The sensor package is mounted on a <strong>Gremsy T3V3</strong> gimbal for stability. It integrates a <strong>Sony A7R IV</strong> for high-resolution visual inspection and a <strong>FLIR Hadron 640R</strong> for thermal imaging, providing a complete data capture solution.`,
            spec: 'Gimbal: 3-axis Stabilized | Visual: 61MP Stills | Thermal: 640x512 Radiometric'
        },
        avionics: {
            title: 'Avionics: Cube Orange+ & ArduPilot',
            imageUrl: 'https://i.postimg.cc/mrBJzXbj/avionics.png',
            content: `The system is commanded by a <strong>Cube Orange+</strong> flight controller, an industry standard for reliability with its triple-redundant IMU. It runs the robust <strong>ArduPilot</strong> firmware. The included <strong>Here 3+ GPS</strong> provides RTK-level accuracy.`,
            spec: 'FC: Triple Redundant IMU | Firmware: ArduPilot Copter | GPS: RTK Enabled'
        }
    };

    const detailsPanel = document.getElementById('details-panel');
    const anatomyParts = document.querySelectorAll('.anatomy-part');

    function updateDetails(part) {
        const data = anatomyData[part];
        if (data && detailsPanel) {
            detailsPanel.innerHTML = `
                <h3 class="text-lg font-bold text-slate-900">${data.title}</h3>
                <img src="${data.imageUrl}" alt="${data.title}" class="w-full h-40 object-contain rounded-lg my-4 bg-slate-100 p-2 border border-slate-200">
                <p class="mt-2 text-sm text-slate-600">${data.content}</p>
                <div class="mt-4 pt-4 border-t border-slate-200">
                    <p class="text-xs font-semibold text-sky-700 tracking-wider uppercase">Key Specifications</p>
                    <p class="text-sm text-slate-800 font-medium">${data.spec}</p>
                </div>
            `;
        }
    }

    anatomyParts.forEach(part => {
        part.addEventListener('click', (e) => {
            const partName = e.currentTarget.dataset.part;
            updateDetails(partName);
            
            anatomyParts.forEach(p => p.classList.remove('active'));
            // For octocopter, all motor divs should highlight together
            if (partName === 'propulsion') {
                document.querySelectorAll('[data-part="propulsion"]').forEach(p => p.classList.add('active'));
            } else {
                e.currentTarget.classList.add('active');
            }
        });
    });

    // Initial load
    if (document.querySelector('[data-part="frame"]')) {
        updateDetails('frame');
        document.querySelector('[data-part="frame"]').classList.add('active');
    }

    const weightData = {
        labels: ['Power (Batteries)', 'Airframe', 'Propulsion', 'Payload', 'Avionics/Misc'],
        datasets: [{
            label: 'Weight (kg)',
            data: [3.80, 2.80, 2.12, 1.47, 0.36], // Updated data
            backgroundColor: ['#0ea5e9', '#64748b', '#38bdf8', '#f59e0b', '#94a3b8'],
            borderColor: '#f8fafc',
            borderWidth: 2,
            hoverOffset: 4
        }]
    };

    const weightChartCtx = document.getElementById('weightChart').getContext('2d');
    new Chart(weightChartCtx, {
        type: 'doughnut',
        data: weightData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom', labels: { font: { size: 12 }, color: '#475569' }},
                tooltip: { callbacks: { label: (c) => `${c.label}: ${c.parsed.toFixed(2)} kg` }}
            }
        }
    });

    const costData = {
        labels: ['Payload: Sony A7R IV', 'Payload: Gimbal & Thermal', 'Propulsion (Motors/ESCs)', 'Frame: Tarot X8-Pro', 'Avionics (FC/GPS)', 'Power (Batteries)', 'Misc'],
        datasets: [{
            label: 'Cost (INR)',
            data: [290000, 300000, 250000, 80000, 45000, 65000, 100000],
            backgroundColor: '#0ea5e9',
            borderColor: '#0284c7',
            borderWidth: 1,
            borderRadius: 4
        }]
    };
    
    const costChartCtx = document.getElementById('costChart').getContext('2d');
    new Chart(costChartCtx, {
        type: 'bar',
        data: costData,
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: { callbacks: { label: (c) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 0 }).format(c.parsed.x) }}
            },
            scales: {
                x: { ticks: { callback: (v) => `₹${(v/100000).toFixed(1)}L`, color: '#475569' }, grid: { color: '#e2e8f0' }},
                y: { ticks: { color: '#475569' }, grid: { display: false }}
            }
        }
    });

    const sections = document.querySelectorAll('main section');
    const navLinks = document.querySelectorAll('header a');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.remove('active', 'border-sky-600', 'text-sky-600');
                    link.classList.add('border-transparent');
                    if (link.getAttribute('href') === `#${entry.target.id}`) {
                        link.classList.add('active', 'border-sky-600', 'text-sky-600');
                        link.classList.remove('border-transparent');
                    }
                });
            }
        });
    }, { rootMargin: "-40% 0px -40% 0px" });

    sections.forEach(section => observer.observe(section));
});
</script>
</body>
</html>